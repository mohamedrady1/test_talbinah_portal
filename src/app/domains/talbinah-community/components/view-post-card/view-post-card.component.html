<div class="card">
  <div class="card__header">
    <div class="card__user-info">
      <img [src]="config?.user?.emoji?.image" [alt]="config?.user?.dummy_name"
        (click)="goToProfile(config?.user?.id ?? 0)" loading="lazy" decoding="async" fetchpriority="low" width="auto"
        height="auto" class="card__avatar"
        onerror="this.onerror=null; this.src='images/community/icons/header-icon.png';" />

      <div class="card__details">
        <div class="card__details--user-info">
          @if(config?.user && config?.user?.id !== undefined){
          <span class="card__name" (click)="config?.user?.id?goToProfile(config?.user?.id ?? 0):null">
            {{ config?.user?.dummy_name ?? ('general.unknownUser'|translate) }}
          </span>
          }
          @if (!config?.user || config?.user?.id === undefined) {
          <span class="card__name">
            {{ config?.user?.dummy_name ?? ('general.unknownUser'|translate) }}
          </span>
          }
        </div>
        <div class="card__time">
          <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M6.99984 13.7707C3.54067 13.7707 0.729004 10.959 0.729004 7.49984C0.729004 4.04067 3.54067 1.229 6.99984 1.229C10.459 1.229 13.2707 4.04067 13.2707 7.49984C13.2707 10.959 10.459 13.7707 6.99984 13.7707ZM6.99984 2.104C4.02484 2.104 1.604 4.52484 1.604 7.49984C1.604 10.4748 4.02484 12.8957 6.99984 12.8957C9.97484 12.8957 12.3957 10.4748 12.3957 7.49984C12.3957 4.52484 9.97484 2.104 6.99984 2.104Z"
              fill="#47586E" />
            <path
              d="M9.16421 9.79253C9.08837 9.79253 9.01254 9.77503 8.94254 9.72836L7.13421 8.64919C6.68504 8.38086 6.35254 7.79169 6.35254 7.27253V4.88086C6.35254 4.64169 6.55087 4.44336 6.79004 4.44336C7.02921 4.44336 7.22754 4.64169 7.22754 4.88086V7.27253C7.22754 7.48253 7.40254 7.79169 7.58337 7.89669L9.39171 8.97586C9.60171 9.09836 9.66587 9.36669 9.54337 9.57669C9.45587 9.71669 9.31004 9.79253 9.16421 9.79253Z"
              fill="#47586E" />
          </svg>
          <p>
            {{ config?.id ? returnItemTimeAgo(config.id, getCreatedAtDate()):'' }}
          </p>
        </div>
      </div>
      @if(config?.user?.id){

      @if (userIdentityProfileData()?.id !==config?.user?.id ) {
      <button class="card__follow" [disabled]="isLoadingFollow()" (click)="onActionClick('follow')">
        @if (isLoadingFollow()) {
        <div class="button-loading" aria-label="Submit in progress">
          {{ 'in_progress' | translate }}
          <span class="dot-loader"></span>
        </div>
        } @else {
        @if (!config.is_followed) {
        <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M10.5 7.9375H3.5C3.26083 7.9375 3.0625 7.73917 3.0625 7.5C3.0625 7.26083 3.26083 7.0625 3.5 7.0625H10.5C10.7392 7.0625 10.9375 7.26083 10.9375 7.5C10.9375 7.73917 10.7392 7.9375 10.5 7.9375Z"
            fill="#47586E" />
          <path
            d="M7 11.4375C6.76083 11.4375 6.5625 11.2392 6.5625 11V4C6.5625 3.76083 6.76083 3.5625 7 3.5625C7.23917 3.5625 7.4375 3.76083 7.4375 4V11C7.4375 11.2392 7.23917 11.4375 7 11.4375Z"
            fill="#47586E" />
        </svg>
        <p>
          {{"talbinahCommunity.follow"|translate}}
        </p>
        } @else {
        <svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_560_56382)">
            <path
              d="M10.2426 2.25734C9.10938 1.12412 7.60266 0.5 6 0.5C4.39732 0.5 2.89057 1.12412 1.75734 2.25734C0.624094 3.39059 0 4.89734 0 6.5C0 8.10266 0.624094 9.60938 1.75734 10.7426C2.89059 11.8759 4.39732 12.5 6 12.5C7.60266 12.5 9.10938 11.8759 10.2426 10.7426C11.3759 9.60938 12 8.10266 12 6.5C12 4.89734 11.3759 3.39062 10.2426 2.25734ZM6 11.7969C3.07929 11.7969 0.703125 9.42071 0.703125 6.5C0.703125 3.57929 3.07929 1.20312 6 1.20312C8.92071 1.20312 11.2969 3.57929 11.2969 6.5C11.2969 9.42071 8.92071 11.7969 6 11.7969Z"
              fill="#47586E" />
            <path
              d="M8.86632 4.57461C8.72904 4.43736 8.50643 4.43736 8.36916 4.57464L5.26465 7.67915L3.63043 6.04492C3.49315 5.90765 3.27054 5.90765 3.13325 6.04492C2.99595 6.18219 2.99595 6.4048 3.13325 6.5421L5.01605 8.4249C5.0847 8.49355 5.17468 8.52786 5.26463 8.52786C5.35458 8.52786 5.44458 8.49353 5.51321 8.4249L8.86632 5.07179C9.00361 4.93452 9.00361 4.71191 8.86632 4.57461Z"
              fill="#47586E" />
          </g>
          <defs>
            <clipPath id="clip0_560_56382">
              <rect width="12" height="12" fill="white" transform="translate(0 0.5)" />
            </clipPath>
          </defs>
        </svg>

        <p>
          {{"talbinahCommunity.following"|translate}}
        </p>
        }
        }
      </button>
      } @else {
      <span class="card__follow">
        ({{"general.me"|translate}})
      </span>
      }
      }
    </div>
    <div class="card__actions">
      @if (showGratitude()) { <div class="card__tag card__tag--gratitude">
        {{config.interest?.name}}
      </div>
      }
    </div>
  </div>
  <div class="card__content">
    <p [ngClass]="{'text-truncate': type === cardType.SUMMARY}">
      {{config.content}}
    </p>
    @if (type==cardType.SUMMARY) {
    <div class="card__content--watch-post">
      <button>
        <span>
          {{"talbinahCommunity.viewPost"|translate}}
        </span>
      </button>
    </div>
    }
  </div>
  @if (type==cardType.DETAILS) {
  <div class="card__actions" [ngClass]="{'has-border':hasBorder}">
    <div class="card__actions__add-comment-favourite">

      <div class="card__actions__add-comment-favourite--favourite" (click)="onActionClick('favourite')"
        [class.active]="isLiked()">
        @if(isLiked()){
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path
            d="M9.59 1.80811C8.53417 1.80811 7.58917 2.32144 7 3.10894C6.41084 2.32144 5.46584 1.80811 4.41 1.80811C2.61917 1.80811 1.16667 3.26644 1.16667 5.06894C1.16667 5.76311 1.27751 6.40477 1.47001 6.99977C2.39167 9.91644 5.2325 11.6606 6.63834 12.1389C6.83667 12.2089 7.16334 12.2089 7.36167 12.1389C8.7675 11.6606 11.6083 9.91644 12.53 6.99977C12.7225 6.40477 12.8333 5.76311 12.8333 5.06894C12.8333 3.26644 11.3808 1.80811 9.59 1.80811Z"
            fill="#FF0027" aria-hidden="true" focusable="false" />
        </svg>
        } @else {
        <!-- Gray Heart SVG -->
        <svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M7.50002 12.6292C7.31919 12.6292 7.14419 12.6059 6.99835 12.5534C4.77002 11.7892 1.22919 9.07668 1.22919 5.06918C1.22919 3.02752 2.88002 1.37085 4.91002 1.37085C5.89585 1.37085 6.81752 1.75585 7.50002 2.44418C8.18252 1.75585 9.10419 1.37085 10.09 1.37085C12.12 1.37085 13.7709 3.03335 13.7709 5.06918C13.7709 9.08252 10.23 11.7892 8.00169 12.5534C7.85585 12.6059 7.68085 12.6292 7.50002 12.6292ZM4.91002 2.24585C3.36419 2.24585 2.10419 3.51168 2.10419 5.06918C2.10419 9.05335 5.93669 11.27 7.28419 11.7309C7.38919 11.7659 7.61669 11.7659 7.72169 11.7309C9.06335 11.27 12.9017 9.05918 12.9017 5.06918C12.9017 3.51168 11.6417 2.24585 10.0959 2.24585C9.20919 2.24585 8.38669 2.66002 7.85585 3.37752C7.69252 3.59918 7.31919 3.59918 7.15585 3.37752C6.61335 2.65418 5.79669 2.24585 4.91002 2.24585Z"
            fill="#666666" aria-hidden="true" focusable="false" />
        </svg>
        }
        <p>
          {{config.reactions_count}}
        </p>
      </div>

      <div class="card__actions__add-comment-favourite--comment" (click)="onActionClick('comment')">
        <svg class="scaleX-ltr" width="14" height="15" viewBox="0 0 14 15" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M6.99984 13.8057C6.59734 13.8057 6.21817 13.6015 5.94984 13.2457L5.07484 12.079C5.05734 12.0557 4.98734 12.0265 4.95817 12.0207H4.6665C2.234 12.0207 0.729004 11.3615 0.729004 8.08317V5.1665C0.729004 2.58817 2.08817 1.229 4.6665 1.229H9.33317C11.9115 1.229 13.2707 2.58817 13.2707 5.1665V8.08317C13.2707 10.6615 11.9115 12.0207 9.33317 12.0207H9.0415C8.99484 12.0207 8.954 12.044 8.92484 12.079L8.04984 13.2457C7.7815 13.6015 7.40234 13.8057 6.99984 13.8057ZM4.6665 2.104C2.57817 2.104 1.604 3.07817 1.604 5.1665V8.08317C1.604 10.7198 2.50817 11.1457 4.6665 11.1457H4.95817C5.25567 11.1457 5.594 11.3148 5.77484 11.554L6.64984 12.7207C6.854 12.989 7.14567 12.989 7.34984 12.7207L8.22484 11.554C8.41734 11.2973 8.72067 11.1457 9.0415 11.1457H9.33317C11.4215 11.1457 12.3957 10.1715 12.3957 8.08317V5.1665C12.3957 3.07817 11.4215 2.104 9.33317 2.104H4.6665Z"
            fill="#47586E" />
          <path
            d="M6.99984 7.50016C6.67317 7.50016 6.4165 7.23766 6.4165 6.91683C6.4165 6.596 6.679 6.3335 6.99984 6.3335C7.32067 6.3335 7.58317 6.596 7.58317 6.91683C7.58317 7.23766 7.3265 7.50016 6.99984 7.50016Z"
            fill="#47586E" />
          <path
            d="M9.33333 7.50016C9.00667 7.50016 8.75 7.23766 8.75 6.91683C8.75 6.596 9.0125 6.3335 9.33333 6.3335C9.65417 6.3335 9.91667 6.596 9.91667 6.91683C9.91667 7.23766 9.66 7.50016 9.33333 7.50016Z"
            fill="#47586E" />
          <path
            d="M4.66683 7.50016C4.34016 7.50016 4.0835 7.23766 4.0835 6.91683C4.0835 6.596 4.346 6.3335 4.66683 6.3335C4.98766 6.3335 5.25016 6.596 5.25016 6.91683C5.25016 7.23766 4.9935 7.50016 4.66683 7.50016Z"
            fill="#47586E" />
        </svg>
        <p>
          {{config.comments_count}}
        </p>
      </div>
      <div class="card__actions__add-comment-favourite--add" (click)="onActionClick('bookmark')"
        [class.active]="isMarked()">
        @if (!isLoadingBookmark()) {
        @if(!isMarked()){
        <svg class="scaleX-ltr" width="14" height="15" viewBox="0 0 14 15" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path fill="#47586E"
            d="M1.9253 13.771C1.7153 13.771 1.51113 13.7185 1.33613 13.6135C0.945292 13.386 0.723633 12.931 0.723633 12.3652V5.73849C0.723633 4.49599 1.73279 3.48682 2.97529 3.48682H7.51364C8.75614 3.48682 9.7653 4.49599 9.7653 5.73849V12.3652C9.7653 12.931 9.54364 13.3802 9.15281 13.6135C8.76197 13.841 8.26030 13.8176 7.76447 13.5435L5.47197 12.266C5.36114 12.2018 5.12779 12.2018 5.01696 12.266L2.72446 13.5435C2.45613 13.6951 2.18196 13.771 1.92530 13.771ZM2.98113 4.36766C2.22280 4.36766 1.60447 4.98598 1.60447 5.74431V12.371C1.60447 12.6102 1.67447 12.7968 1.78530 12.861C1.89614 12.9252 2.09448 12.896 2.30448 12.7793L4.59697 11.5018C4.97031 11.2976 5.53030 11.2976 5.90364 11.5018L8.19613 12.7793C8.40613 12.896 8.59864 12.9252 8.71531 12.861C8.82614 12.7968 8.89614 12.6102 8.89614 12.371V5.74431C8.89614 4.98598 8.27781 4.36766 7.51948 4.36766H2.98113Z"
            fill="#47586E" />
          <path fill="#47586E"
            d="M8.56901 13.771C8.31234 13.771 8.04401 13.6952 7.76984 13.5494L5.47735 12.2719C5.36651 12.2135 5.12732 12.2135 5.01649 12.2719L2.72983 13.5494C2.234 13.8235 1.7265 13.8469 1.3415 13.6194C0.950663 13.3919 0.729004 12.9369 0.729004 12.3769V5.75019C0.729004 4.50769 1.73816 3.49854 2.98066 3.49854H7.51901C8.76151 3.49854 9.77067 4.50769 9.77067 5.75019V12.3769C9.77067 12.9369 9.54901 13.3919 9.15818 13.6194C8.98318 13.7185 8.78484 13.771 8.56901 13.771ZM5.24984 11.3502C5.48317 11.3502 5.71067 11.4027 5.90317 11.5077L8.19566 12.7852C8.40566 12.9019 8.604 12.931 8.71484 12.861C8.82567 12.7969 8.89567 12.6102 8.89567 12.371V5.74435C8.89567 4.98602 8.27735 4.3677 7.51901 4.3677H2.98066C2.22233 4.3677 1.604 4.98602 1.604 5.74435V12.371C1.604 12.6102 1.674 12.7969 1.78484 12.861C1.89567 12.9252 2.09401 12.896 2.30401 12.7794L4.59651 11.5019C4.78317 11.4027 5.01650 11.3502 5.24984 11.3502Z"
            fill="#47586E" />
          <path fill="#47586E"
            d="M12.069 11.5074C11.8123 11.5074 11.544 11.4315 11.2698 11.2857L9.11734 10.084C8.97734 10.0082 8.89567 9.86236 8.89567 9.70486V5.74986C8.89567 4.99152 8.27735 4.37320 7.51901 4.37320H4.66650C4.42734 4.37320 4.22900 4.17487 4.22900 3.93570V3.48652C4.22900 2.24402 5.23816 1.23486 6.48066 1.23486H11.019C12.2615 1.23486 13.2707 2.24402 13.2707 3.48652V10.1132C13.2707 10.6732 13.0490 11.1282 12.6582 11.3557C12.4832 11.4548 12.2848 11.5074 12.0690 11.5074ZM9.77067 9.44235L11.6957 10.5215C11.9057 10.6382 12.0982 10.6674 12.2148 10.5974C12.3315 10.5274 12.3957 10.3465 12.3957 10.1074V3.48068C12.3957 2.72235 11.7773 2.10402 11.0190 2.10402H6.48066C5.72233 2.10402 5.10400 2.72235 5.10400 3.48068V3.49236H7.51901C8.76151 3.49236 9.77067 4.50152 9.77067 5.74402V9.44235Z"
            fill="#47586E" />
        </svg>
        } @else {
        <svg class="scaleX-ltr" xmlns="http://www.w3.org/2000/svg" width="14" height="15" viewBox="0 0 14 15"
          fill="none">
          <path
            d="M7.519 3.93018H2.98067C1.98317 3.93018 1.1665 4.74684 1.1665 5.74434V12.371C1.1665 13.2168 1.77317 13.5785 2.514 13.1643L4.8065 11.8868C5.0515 11.7527 5.44817 11.7527 5.68734 11.8868L7.97984 13.1643C8.7265 13.5727 9.33317 13.2168 9.33317 12.371V5.74434C9.33317 4.74684 8.5165 3.93018 7.519 3.93018Z"
            fill="#0E39B6" />
          <path
            d="M12.8334 3.48067V10.1073C12.8334 10.9532 12.2267 11.309 11.4859 10.9007L10.3601 10.2707C10.2667 10.2182 10.2084 10.119 10.2084 10.014V5.744C10.2084 4.26234 9.0009 3.05484 7.51924 3.05484H5.14507C4.92924 3.05484 4.77757 2.82734 4.87674 2.64067C5.18007 2.06317 5.78674 1.6665 6.4809 1.6665H11.0192C12.0167 1.6665 12.8334 2.48317 12.8334 3.48067Z"
            fill="#0E39B6" />
        </svg>}
        <p>
          {{config.bookmarks_count}}
        </p>
        }
        @else {
        <div class="shimmer-circle"></div>
        }
      </div>
    </div>
  </div>
  @if (isEnableCommented) {
  <app-comment-box [isActions]="isActions" [isLoadingComment]="isLoadingComment"
    [userIdentityProfileData]="userIdentityProfileData" (commentSubmitted)="onCommentSubmit($event)">
  </app-comment-box>
  }
  }
</div>