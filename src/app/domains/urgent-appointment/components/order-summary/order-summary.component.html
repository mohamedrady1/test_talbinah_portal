<main class="order-summary-layout">
  <div class="order-summary-layout__items">
    <div class="order-summary-layout__grid order-summary-layout__infos">
      <label class="order-summary-layout__infos--title">
        {{'OrderSummary.Title' | translate}}
      </label>
      <div class="order-summary-layout__infos--item">
        <label class="order-summary-layout__infos--label">
          المجموع الفرعى
        </label>
        <span class="order-summary-layout__infos--value">
          800 ريال
        </span>
      </div>
      <div class="order-summary-layout__infos--item">
        <label class="order-summary-layout__infos--label">
          الخصم
        </label>
        <span class="order-summary-layout__infos--value">
          -50 ريال
        </span>
      </div>
      <div class="order-summary-layout__infos--item order-summary-layout__infos--item--last">
        <label class="order-summary-layout__infos--label">
          الاجمالى
        </label>
        <span class="order-summary-layout__infos--value order-summary-layout__infos--value--active">
          750 ريال
        </span>
      </div>
    </div>

    <div class="order-summary-layout__grid order-summary-layout__discount">
      <label class="order-summary-layout__discount--title">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path
            d="M9.92688 12.1465H4.06687C3.72021 12.1465 3.39353 12.1132 3.1002 12.0465C2.94687 12.0265 2.76021 11.9732 2.56687 11.8998C1.68021 11.5665 0.633545 10.7465 0.633545 8.7065V5.27315C0.633545 3.09315 1.88687 1.83984 4.06687 1.83984H9.92688C11.7669 1.83984 12.9535 2.71982 13.2735 4.31982C13.3335 4.61316 13.3602 4.92649 13.3602 5.27315V8.7065C13.3602 10.8998 12.1135 12.1465 9.92688 12.1465ZM4.07353 2.85319C2.43353 2.85319 1.6402 3.6465 1.6402 5.2865V8.71985C1.6402 9.91318 2.06021 10.6465 2.92021 10.9732C3.05354 11.0199 3.18021 11.0532 3.30021 11.0732C3.55354 11.1265 3.80019 11.1532 4.07353 11.1532H9.93353C11.5735 11.1532 12.3669 10.3598 12.3669 8.71985V5.2865C12.3669 5.0065 12.3469 4.75983 12.3002 4.53316C12.0735 3.39983 11.3002 2.85319 9.93353 2.85319H4.07353Z"
            fill="#47586E" />
          <path
            d="M11.9267 14.1475H6.06665C5.49998 14.1475 4.99331 14.0675 4.55997 13.9009C3.57997 13.5342 2.93997 12.7609 2.71997 11.6542C2.68663 11.4875 2.73998 11.3142 2.85998 11.2009C2.97998 11.0809 3.15332 11.0342 3.31998 11.0742C3.53998 11.1209 3.78665 11.1475 4.06665 11.1475H9.92665C11.5667 11.1475 12.36 10.3542 12.36 8.71422V5.28087C12.36 5.00087 12.34 4.7542 12.2933 4.52754C12.26 4.36087 12.3133 4.19421 12.4267 4.07421C12.5467 3.95421 12.7133 3.90087 12.88 3.94087C14.48 4.26753 15.36 5.45421 15.36 7.28087V10.7142C15.36 12.9009 14.1133 14.1475 11.9267 14.1475ZM3.94665 12.1475C4.15998 12.5342 4.47998 12.8076 4.91998 12.9676C5.23998 13.0876 5.62663 13.1475 6.0733 13.1475H11.9333C13.5733 13.1475 14.3666 12.3542 14.3666 10.7142V7.28087C14.3666 6.22754 14.04 5.52754 13.3666 5.16088C13.3666 5.20088 13.3666 5.24087 13.3666 5.28087V8.71422C13.3666 10.8942 12.1133 12.1475 9.9333 12.1475H4.0733C4.02663 12.1475 3.98665 12.1475 3.94665 12.1475Z"
            fill="#47586E" />
          <path
            d="M7 9.26025C5.75333 9.26025 4.73999 8.24691 4.73999 7.00024C4.73999 5.75358 5.75333 4.74023 7 4.74023C8.24667 4.74023 9.26001 5.75358 9.26001 7.00024C9.26001 8.24691 8.24667 9.26025 7 9.26025ZM7 5.74023C6.30667 5.74023 5.73999 6.30691 5.73999 7.00024C5.73999 7.69358 6.30667 8.26025 7 8.26025C7.69333 8.26025 8.26001 7.69358 8.26001 7.00024C8.26001 6.30691 7.69333 5.74023 7 5.74023Z"
            fill="#47586E" />
          <path
            d="M3.18677 8.96655C2.91343 8.96655 2.68677 8.73989 2.68677 8.46655V5.5332C2.68677 5.25987 2.91343 5.0332 3.18677 5.0332C3.4601 5.0332 3.68677 5.25987 3.68677 5.5332V8.46655C3.68677 8.73989 3.46677 8.96655 3.18677 8.96655Z"
            fill="#47586E" />
          <path
            d="M10.8066 8.96655C10.5333 8.96655 10.3066 8.73989 10.3066 8.46655V5.5332C10.3066 5.25987 10.5333 5.0332 10.8066 5.0332C11.08 5.0332 11.3066 5.25987 11.3066 5.5332V8.46655C11.3066 8.73989 11.0866 8.96655 10.8066 8.96655Z"
            fill="#47586E" />
        </svg>

        <span>
          {{'OrderSummary.DiscountTitle' | translate}}
        </span>
      </label>
      <div class="order-summary-layout__discount--form">
        <form [formGroup]="discountForm" (ngSubmit)="onSubmitDiscountForm()" class="discount-form">
          <div class="discount-form__groups">
            <!-- Specialities -->
            <div class="discount-form__group">
              <div class="discount-form__group-box">
                <!-- <label for="DiscountCode" class="discount-form__label">
                  {{ 'OrderSummary.ChooseDiscountCode' | translate }}
                </label> -->
                <input class="form-control" type="number" name="DiscountCode" id="DiscountCode" formControlName="code"
                  class="discount-form__input" [attr.aria-label]="'OrderSummary.DiscountCode' | translate"
                  placeholder="{{ 'OrderSummary.DiscountCodePlaceholder' | translate }}" />

                <!-- Submit Button -->
                <div class="discount-form__actions">
                  <button type="submit" class="discount-form__submit-button"
                    [attr.aria-label]="'general.Apply' | translate">
                    {{ 'general.Apply' | translate }}
                  </button>
                  @if (isLoadingDiscount()) {
                  <div class="discount-form__loading" aria-label="Booking in progress">
                    {{ 'in_progress' | translate }}
                  </div>
                  }
                </div>
              </div>

              @if (discountForm.get('code')?.invalid &&
              discountForm.get('code')?.touched) {
              <span class="discount-form__error-message" role="alert">
                {{ 'OrderSummary.DiscountCodeRequired' | translate }}
              </span>
              }
            </div>
          </div>
        </form>
      </div>
    </div>

    <div class="order-summary-layout__grid order-summary-layout__payment">
      <label class="order-summary-layout__discount--title">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path
            d="M9.92688 12.1465H4.06687C3.72021 12.1465 3.39353 12.1132 3.1002 12.0465C2.94687 12.0265 2.76021 11.9732 2.56687 11.8998C1.68021 11.5665 0.633545 10.7465 0.633545 8.7065V5.27315C0.633545 3.09315 1.88687 1.83984 4.06687 1.83984H9.92688C11.7669 1.83984 12.9535 2.71982 13.2735 4.31982C13.3335 4.61316 13.3602 4.92649 13.3602 5.27315V8.7065C13.3602 10.8998 12.1135 12.1465 9.92688 12.1465ZM4.07353 2.85319C2.43353 2.85319 1.6402 3.6465 1.6402 5.2865V8.71985C1.6402 9.91318 2.06021 10.6465 2.92021 10.9732C3.05354 11.0199 3.18021 11.0532 3.30021 11.0732C3.55354 11.1265 3.80019 11.1532 4.07353 11.1532H9.93353C11.5735 11.1532 12.3669 10.3598 12.3669 8.71985V5.2865C12.3669 5.0065 12.3469 4.75983 12.3002 4.53316C12.0735 3.39983 11.3002 2.85319 9.93353 2.85319H4.07353Z"
            fill="#47586E" />
          <path
            d="M11.9267 14.1475H6.06665C5.49998 14.1475 4.99331 14.0675 4.55997 13.9009C3.57997 13.5342 2.93997 12.7609 2.71997 11.6542C2.68663 11.4875 2.73998 11.3142 2.85998 11.2009C2.97998 11.0809 3.15332 11.0342 3.31998 11.0742C3.53998 11.1209 3.78665 11.1475 4.06665 11.1475H9.92665C11.5667 11.1475 12.36 10.3542 12.36 8.71422V5.28087C12.36 5.00087 12.34 4.7542 12.2933 4.52754C12.26 4.36087 12.3133 4.19421 12.4267 4.07421C12.5467 3.95421 12.7133 3.90087 12.88 3.94087C14.48 4.26753 15.36 5.45421 15.36 7.28087V10.7142C15.36 12.9009 14.1133 14.1475 11.9267 14.1475ZM3.94665 12.1475C4.15998 12.5342 4.47998 12.8076 4.91998 12.9676C5.23998 13.0876 5.62663 13.1475 6.0733 13.1475H11.9333C13.5733 13.1475 14.3666 12.3542 14.3666 10.7142V7.28087C14.3666 6.22754 14.04 5.52754 13.3666 5.16088C13.3666 5.20088 13.3666 5.24087 13.3666 5.28087V8.71422C13.3666 10.8942 12.1133 12.1475 9.9333 12.1475H4.0733C4.02663 12.1475 3.98665 12.1475 3.94665 12.1475Z"
            fill="#47586E" />
          <path
            d="M7 9.26025C5.75333 9.26025 4.73999 8.24691 4.73999 7.00024C4.73999 5.75358 5.75333 4.74023 7 4.74023C8.24667 4.74023 9.26001 5.75358 9.26001 7.00024C9.26001 8.24691 8.24667 9.26025 7 9.26025ZM7 5.74023C6.30667 5.74023 5.73999 6.30691 5.73999 7.00024C5.73999 7.69358 6.30667 8.26025 7 8.26025C7.69333 8.26025 8.26001 7.69358 8.26001 7.00024C8.26001 6.30691 7.69333 5.74023 7 5.74023Z"
            fill="#47586E" />
          <path
            d="M3.18677 8.96655C2.91343 8.96655 2.68677 8.73989 2.68677 8.46655V5.5332C2.68677 5.25987 2.91343 5.0332 3.18677 5.0332C3.4601 5.0332 3.68677 5.25987 3.68677 5.5332V8.46655C3.68677 8.73989 3.46677 8.96655 3.18677 8.96655Z"
            fill="#47586E" />
          <path
            d="M10.8066 8.96655C10.5333 8.96655 10.3066 8.73989 10.3066 8.46655V5.5332C10.3066 5.25987 10.5333 5.0332 10.8066 5.0332C11.08 5.0332 11.3066 5.25987 11.3066 5.5332V8.46655C11.3066 8.73989 11.0866 8.96655 10.8066 8.96655Z"
            fill="#47586E" />
        </svg>

        <span>
          {{'PaymentMethods.ChoosePaymentMethod' | translate}}
        </span>
      </label>
      <div class="order-summary-layout__payment-method--form">
        <form [formGroup]="paymentMethodsForm" (ngSubmit)="onSubmitPaymentMethodsForm()" class="payment-method-form">
          <div class="payment-method-form__group">
            <div class="payment-method-form__control-wrapper">
              @for (paymentMethod of paymentMethodsList; track $index) {
              <label class="payment-method-form__radio-label">
                <div class="payment-method-form__radio-box">
                  <div class="payment-method-form__radio-icon">
                    <img [src]="paymentMethod.icon" [alt]="paymentMethod.label" class="payment-method-form__radio-image"
                      loading="lazy" width="24" height="24" decoding="async" fetchpriority="low" />
                  </div>
                  <span class="payment-method-form__radio-text">
                    {{ paymentMethod.label | translate }}
                  </span>
                </div>
                <input type="radio" [value]="paymentMethod.value" formControlName="paymentMethod"
                  [attr.aria-label]="paymentMethod.label" class="payment-method-form__radio-input" />
              </label>
              }

            </div>
            @if (paymentMethodsForm.get('paymentMethod')?.invalid &&
            paymentMethodsForm.get('paymentMethod')?.touched) {
            <span class="payment-method-form__error-message" role="alert">
              {{ 'PaymentMethods.ChoosePaymentMethodRequired' | translate }}
            </span>
            }
          </div>
          <!-- Submit Button -->
          <div class="payment-method-form__actions">
            <button type="submit" class="payment-method-form__submit-button"
              [attr.aria-label]="'general.Apply' | translate">
              {{ 'PaymentMethods.PaymentMethodsButton' | translate }}
            </button>
            @if (isLoadingPaymentMethods()) {
            <div class="payment-method-form__loading" aria-label="Payment method in progress">
              {{ 'in_progress' | translate }}
            </div>
            }
          </div>
        </form>
      </div>
    </div>
  </div>
</main>