<div class="article-card" (click)="cardClicked()">
  <div class="article-card__content" [class.details]="isDetailsView()">
    <div class="article-card__image" [class.details]="isDetailsView()">

      <img
        appLazyLoadImage="{{ typeof item.image === 'string' ? (item.image || 'images/articles/calender.png') : 'images/articles/calender.png' }}"
        [alt]="item.title || 'Article image'" ngOptimizedImage width="300" height="200"
        placeholder="images/articles/calender.png" class="article-card__image__img" />
    </div>
    <div class="article-card__info">
      <div class="article-card__title">
        <p [class.details]="isDetailsView()" class="text-truncate">
          {{ item.title }}
        </p>
        @if(!hideButtonAction){
        <div class="article-card__header-actions">
          @if (!hideFavouriteAction) {
          <button type="button" class="article-card__like-button" (click)="handleFavouriteToggle($event)"
            [attr.aria-label]="item.is_bookmark ? 'Remove from favourites' : 'Add to favourites'">
            @if(isToggleLoading()){
            <div class="shimmer-circle"></div>
            }
            @else if (item.is_bookmark) {
            <!-- Red Heart SVG -->
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
              <path
                d="M9.59 1.80811C8.53417 1.80811 7.58917 2.32144 7 3.10894C6.41084 2.32144 5.46584 1.80811 4.41 1.80811C2.61917 1.80811 1.16667 3.26644 1.16667 5.06894C1.16667 5.76311 1.27751 6.40477 1.47001 6.99977C2.39167 9.91644 5.2325 11.6606 6.63834 12.1389C6.83667 12.2089 7.16334 12.2089 7.36167 12.1389C8.7675 11.6606 11.6083 9.91644 12.53 6.99977C12.7225 6.40477 12.8333 5.76311 12.8333 5.06894C12.8333 3.26644 11.3808 1.80811 9.59 1.80811Z"
                fill="#FF0027" aria-hidden="true" focusable="false" />
            </svg>
            } @else {
            <!-- Gray Heart SVG -->
            <svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M7.50002 12.6292C7.31919 12.6292 7.14419 12.6059 6.99835 12.5534C4.77002 11.7892 1.22919 9.07668 1.22919 5.06918C1.22919 3.02752 2.88002 1.37085 4.91002 1.37085C5.89585 1.37085 6.81752 1.75585 7.50002 2.44418C8.18252 1.75585 9.10419 1.37085 10.09 1.37085C12.12 1.37085 13.7709 3.03335 13.7709 5.06918C13.7709 9.08252 10.23 11.7892 8.00169 12.5534C7.85585 12.6059 7.68085 12.6292 7.50002 12.6292ZM4.91002 2.24585C3.36419 2.24585 2.10419 3.51168 2.10419 5.06918C2.10419 9.05335 5.93669 11.27 7.28419 11.7309C7.38919 11.7659 7.61669 11.7659 7.72169 11.7309C9.06335 11.27 12.9017 9.05918 12.9017 5.06918C12.9017 3.51168 11.6417 2.24585 10.0959 2.24585C9.20919 2.24585 8.38669 2.66002 7.85585 3.37752C7.69252 3.59918 7.31919 3.59918 7.15585 3.37752C6.61335 2.65418 5.79669 2.24585 4.91002 2.24585Z"
                fill="#666666" aria-hidden="true" focusable="false" />
            </svg>
            }
          </button>
          }

          @if (isTask) {
          <div class="article-card__checkbox-wrapper" [class.article-card__checkbox-wrapper--checked]="review"
            [class.article-card__checkbox-wrapper--disabled]="true">
            <input type="checkbox" class="article-card__checkbox" [checked]="review" [readonly]="true" [disabled]="true"
              tabindex="-1" (click)="logCheckboxState($event)" aria-hidden="true" />
          </div>
          }
        </div>
        }
      </div>

      <div class="article-card__description">
        <p [ngClass]="{'text-truncate': allowShortTexts, 'text-truncate-2': !allowShortTexts}"
          [attr.aria-label]="'Truncated content preview ' + item.id">
          {{description || '--'}}
        </p>
      </div>
    </div>
  </div>
  @if(!hideButtonAction){
  <div class="article-card__details" [class.details]="isDetailsView()">
    <div class="article-card__details__category">
      <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none">
        <path
          d="M7.33336 13.7716C6.98336 13.7716 6.63919 13.69 6.35919 13.5325L3.60003 11.94C2.45669 11.17 2.38086 11.03 2.38086 9.82247V6.92914C2.38086 5.72164 2.45669 5.58164 3.57669 4.82914L6.36503 3.21914C6.91919 2.89831 7.75336 2.89831 8.30753 3.21914L11.0667 4.81164C12.21 5.58164 12.2859 5.72164 12.2859 6.92914V9.82247C12.2859 11.03 12.21 11.17 11.09 11.9225L8.30169 13.5325C8.02753 13.6958 7.67753 13.7716 7.33336 13.7716ZM7.33336 3.85497C7.13503 3.85497 6.93669 3.89581 6.79669 3.97747L4.03753 5.56997C3.25586 6.10081 3.25586 6.10081 3.25586 6.92914V9.82247C3.25586 10.6508 3.25586 10.6508 4.06669 11.1991L6.80253 12.7741C7.08253 12.9375 7.59003 12.9375 7.87003 12.7741L10.6292 11.1816C11.4109 10.6508 11.4109 10.6508 11.4109 9.82247V6.92914C11.4109 6.10081 11.4109 6.10081 10.6 5.55247L7.86419 3.97747C7.73003 3.89581 7.53169 3.85497 7.33336 3.85497Z"
          fill="#47586E" />
        <path
          d="M10.5417 5.38768C10.3025 5.38768 10.1042 5.18935 10.1042 4.95018V3.41602C10.1042 2.49435 9.71333 2.10352 8.79167 2.10352H5.875C4.95333 2.10352 4.5625 2.49435 4.5625 3.41602V4.90935C4.5625 5.14852 4.36417 5.34685 4.125 5.34685C3.88583 5.34685 3.6875 5.15435 3.6875 4.90935V3.41602C3.6875 2.00435 4.46333 1.22852 5.875 1.22852H8.79167C10.2033 1.22852 10.9792 2.00435 10.9792 3.41602V4.95018C10.9792 5.18935 10.7808 5.38768 10.5417 5.38768Z"
          fill="#47586E" />
        <path
          d="M8.28418 10.7845C8.16168 10.7845 8.03335 10.7611 7.90502 10.7086L7.33335 10.487L6.76168 10.7145C6.45252 10.837 6.13752 10.8078 5.90418 10.6386C5.67085 10.4695 5.54835 10.1778 5.56585 9.84531L5.60085 9.23281L5.21002 8.76031C5.00002 8.49781 4.93002 8.19448 5.02335 7.91448C5.11085 7.64031 5.35002 7.43031 5.67085 7.34865L6.26585 7.19698L6.59835 6.67781C6.95418 6.11781 7.71835 6.11781 8.07418 6.67781L8.40668 7.19698L9.00168 7.34865C9.32252 7.43031 9.56168 7.64031 9.64918 7.91448C9.73668 8.18865 9.66668 8.49781 9.45668 8.75448L9.06585 9.22698L9.10085 9.83948C9.11835 10.172 8.99585 10.4578 8.76252 10.6328C8.62252 10.732 8.45918 10.7845 8.28418 10.7845ZM5.88668 8.20031L6.27752 8.67281C6.41168 8.83031 6.48752 9.08115 6.47585 9.28531L6.44085 9.89781L7.01252 9.67031C7.20502 9.59448 7.46168 9.59448 7.65418 9.67031L8.22585 9.89781L8.19085 9.28531C8.17918 9.08115 8.25502 8.83615 8.38918 8.67281L8.78002 8.20031L8.18502 8.04865C7.98668 7.99615 7.77668 7.84448 7.66585 7.67531L7.33918 7.16198L7.00668 7.67531C6.89585 7.85031 6.68585 8.00198 6.48752 8.05448L5.88668 8.20031Z"
          fill="#47586E" aria-hidden="true" focusable="false" />
      </svg>
      <p>
        @if (item?.article_category?.name) {
        {{item.article_category.name}}
        }@else {
        {{'--'}}
        }
      </p>
    </div>
    <div class="article-card__details__date">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="15" viewBox="0 0 14 15" fill="none">
        <path
          d="M4.66663 3.85352C4.42746 3.85352 4.22913 3.65518 4.22913 3.41602V1.66602C4.22913 1.42685 4.42746 1.22852 4.66663 1.22852C4.90579 1.22852 5.10413 1.42685 5.10413 1.66602V3.41602C5.10413 3.65518 4.90579 3.85352 4.66663 3.85352Z"
          fill="#47586E" />
        <path
          d="M9.33337 3.85352C9.09421 3.85352 8.89587 3.65518 8.89587 3.41602V1.66602C8.89587 1.42685 9.09421 1.22852 9.33337 1.22852C9.57254 1.22852 9.77087 1.42685 9.77087 1.66602V3.41602C9.77087 3.65518 9.57254 3.85352 9.33337 3.85352Z"
          fill="#47586E" />
        <path
          d="M4.95833 8.95835C4.8825 8.95835 4.80667 8.94086 4.73667 8.91169C4.66083 8.88253 4.6025 8.84168 4.54417 8.78918C4.43917 8.67835 4.375 8.53252 4.375 8.37502C4.375 8.29919 4.3925 8.22335 4.42167 8.15335C4.45083 8.08335 4.49167 8.01919 4.54417 7.96086C4.6025 7.90836 4.66083 7.86751 4.73667 7.83834C4.94667 7.75084 5.20917 7.79752 5.3725 7.96086C5.4775 8.07169 5.54167 8.22335 5.54167 8.37502C5.54167 8.41002 5.53583 8.45086 5.53 8.49169C5.52417 8.52669 5.5125 8.56169 5.495 8.59669C5.48333 8.63169 5.46583 8.66668 5.4425 8.70168C5.425 8.73085 5.39583 8.76001 5.3725 8.78918C5.26167 8.89418 5.11 8.95835 4.95833 8.95835Z"
          fill="#47586E" />
        <path
          d="M6.99996 8.95899C6.92413 8.95899 6.84829 8.9415 6.77829 8.91233C6.70246 8.88317 6.64413 8.84232 6.58579 8.78982C6.48079 8.67899 6.41663 8.53316 6.41663 8.37566C6.41663 8.29982 6.43413 8.22399 6.46329 8.15399C6.49246 8.08399 6.53329 8.01983 6.58579 7.9615C6.64413 7.909 6.70246 7.86815 6.77829 7.83898C6.98829 7.74565 7.25079 7.79816 7.41413 7.9615C7.51913 8.07233 7.58329 8.22399 7.58329 8.37566C7.58329 8.41066 7.57746 8.4515 7.57163 8.49233C7.56579 8.52733 7.55413 8.56233 7.53663 8.59733C7.52496 8.63233 7.50746 8.66732 7.48413 8.70232C7.46663 8.73149 7.43746 8.76065 7.41413 8.78982C7.30329 8.89482 7.15163 8.95899 6.99996 8.95899Z"
          fill="#47586E" />
        <path
          d="M9.04171 8.95899C8.96587 8.95899 8.89004 8.9415 8.82004 8.91233C8.74421 8.88317 8.68587 8.84232 8.62754 8.78982C8.60421 8.76065 8.58087 8.73149 8.55754 8.70232C8.53421 8.66732 8.51671 8.63233 8.50504 8.59733C8.48754 8.56233 8.47587 8.52733 8.47004 8.49233C8.46421 8.4515 8.45837 8.41066 8.45837 8.37566C8.45837 8.22399 8.52254 8.07233 8.62754 7.9615C8.68587 7.909 8.74421 7.86815 8.82004 7.83898C9.03587 7.74565 9.29254 7.79816 9.45587 7.9615C9.56087 8.07233 9.62504 8.22399 9.62504 8.37566C9.62504 8.41066 9.61921 8.4515 9.61337 8.49233C9.60754 8.52733 9.59587 8.56233 9.57837 8.59733C9.56671 8.63233 9.54921 8.66732 9.52588 8.70232C9.50838 8.73149 9.47921 8.76065 9.45587 8.78982C9.34504 8.89482 9.19337 8.95899 9.04171 8.95899Z"
          fill="#47586E" />
        <path
          d="M4.95833 10.9992C4.8825 10.9992 4.80667 10.9817 4.73667 10.9526C4.66667 10.9234 4.6025 10.8825 4.54417 10.83C4.43917 10.7192 4.375 10.5675 4.375 10.4159C4.375 10.34 4.3925 10.2642 4.42167 10.1942C4.45083 10.1184 4.49167 10.0542 4.54417 10.0017C4.76 9.78589 5.15667 9.78589 5.3725 10.0017C5.4775 10.1126 5.54167 10.2642 5.54167 10.4159C5.54167 10.5675 5.4775 10.7192 5.3725 10.83C5.26167 10.935 5.11 10.9992 4.95833 10.9992Z"
          fill="#47586E" />
        <path
          d="M6.99996 10.9992C6.84829 10.9992 6.69663 10.935 6.58579 10.83C6.48079 10.7192 6.41663 10.5675 6.41663 10.4159C6.41663 10.34 6.43413 10.2642 6.46329 10.1942C6.49246 10.1184 6.53329 10.0542 6.58579 10.0017C6.80163 9.78589 7.19829 9.78589 7.41413 10.0017C7.46663 10.0542 7.50746 10.1184 7.53663 10.1942C7.56579 10.2642 7.58329 10.34 7.58329 10.4159C7.58329 10.5675 7.51913 10.7192 7.41413 10.83C7.30329 10.935 7.15163 10.9992 6.99996 10.9992Z"
          fill="#47586E" />
        <path
          d="M11.9583 6.24023H2.04163C1.80246 6.24023 1.60413 6.0419 1.60413 5.80273C1.60413 5.56357 1.80246 5.36523 2.04163 5.36523H11.9583C12.1975 5.36523 12.3958 5.56357 12.3958 5.80273C12.3958 6.0419 12.1975 6.24023 11.9583 6.24023Z"
          fill="#47586E" />
        <path
          d="M9.33333 13.7702H4.66667C2.5375 13.7702 1.3125 12.5452 1.3125 10.416V5.45768C1.3125 3.32852 2.5375 2.10352 4.66667 2.10352H9.33333C11.4625 2.10352 12.6875 3.32852 12.6875 5.45768V10.416C12.6875 12.5452 11.4625 13.7702 9.33333 13.7702ZM4.66667 2.97852C2.99833 2.97852 2.1875 3.78935 2.1875 5.45768V10.416C2.1875 12.0843 2.99833 12.8952 4.66667 12.8952H9.33333C11.0017 12.8952 11.8125 12.0843 11.8125 10.416V5.45768C11.8125 3.78935 11.0017 2.97852 9.33333 2.97852H4.66667Z"
          fill="#47586E" aria-hidden="true" focusable="false" />
      </svg>
      <p>
        @if (item.created_at) {
        {{ item.created_at | date: 'EEEE - d MMMM':'':currentLang }}
        }@else {
        {{'--'}}
        }
      </p>
    </div>
  </div>
  }
</div>