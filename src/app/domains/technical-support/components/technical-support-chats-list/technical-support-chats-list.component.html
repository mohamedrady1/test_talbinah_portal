<main class="technical-support-chats" role="main">
  <section class="technical-support-chats__container">
    <!-- Search -->
    <div class="technical-support-chats__search">
      @if (!isSupport()) {
      <button type="button" class="technical-support-chats__add-btn" (click)="openSupportOptionsModal()"
        aria-label="Add new chat">
        <app-svg-icon name="plus-icon" aria-hidden="true"></app-svg-icon>
      </button>
      }

      <app-local-search [searchTerm]="searchTerm()" (searchChange)="handleSearch($event)">
      </app-local-search>
    </div>

    <!-- Loading -->
    @if (isLoading()) {
    <div class="technical-support-chats__status-message technical-support-chats__status-message--loading"
      aria-live="polite" aria-atomic="true">
      @for (item of [1,2,3,4]; track $index) {
      <app-technical-support-chats-list-skeleton></app-technical-support-chats-list-skeleton>
      }
    </div>
    }

    <!-- Error -->
    @else if (errorMessage()) {
    <div class="technical-support-chats__status-message technical-support-chats__status-message--error"
      aria-live="assertive" aria-atomic="true">
      <app-error-state-card [config]="technicalSupportChatsErrorState"></app-error-state-card>
    </div>
    }

    <!-- Empty -->
    @else if (!filteredChats().length) {
    <div class="technical-support-chats__status-message technical-support-chats__status-message--empty"
      aria-live="polite" aria-atomic="true">
      <app-empty-state-card [config]="technicalSupportChatsEmptyState"></app-empty-state-card>
    </div>
    }

    <!-- Success -->
    @else {
    <div class="technical-support-chats__cards-list" role="list" aria-live="polite" appAutoExactHeight
      heightMode="max-height">
      @for (chat of pagedChats(); track chat.id) {
      <article class="technical-support-chats__card" role="listitem">
        <app-technical-support-chat-card [chat]="chat"></app-technical-support-chat-card>
      </article>
      }
    </div>

    <!-- Pagination -->
    @if (totalPages() > 1) {
    <app-pagination-listing [paginationConfig]="localPaginationConfig()" />
    }
    }
  </section>
</main>