<div class="test-card">

  <div class="test-card__details">
    <div class="test-card__content">
      <div class="test-card__content-header">
        <div class="test-card__content-row">
          <h2 class="test-card__title">
            {{testDetails.title}}
          </h2>

          <div class="test-card__header-actions">
            @if(type!='test') {
            <button class="see-button" (click)="watchDetailsAction()">
              <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M7 9.93448C5.60583 9.93448 4.47417 8.80281 4.47417 7.40865C4.47417 6.01448 5.60583 4.88281 7 4.88281C8.39417 4.88281 9.52583 6.01448 9.52583 7.40865C9.52583 8.80281 8.39417 9.93448 7 9.93448ZM7 5.75781C6.09 5.75781 5.34917 6.49865 5.34917 7.40865C5.34917 8.31865 6.09 9.05948 7 9.05948C7.91 9.05948 8.65083 8.31865 8.65083 7.40865C8.65083 6.49865 7.91 5.75781 7 5.75781Z"
                  fill="#0E39B6" />
                <path
                  d="M7 12.6703C4.80667 12.6703 2.73584 11.387 1.3125 9.15864C0.694172 8.19614 0.694172 6.62697 1.3125 5.65864C2.74167 3.43031 4.8125 2.14697 7 2.14697C9.1875 2.14697 11.2583 3.43031 12.6817 5.65864C13.3 6.62114 13.3 8.19031 12.6817 9.15864C11.2583 11.387 9.1875 12.6703 7 12.6703ZM7 3.02197C5.11584 3.02197 3.31334 4.15364 2.05334 6.13114C1.61584 6.81364 1.61584 8.00364 2.05334 8.68614C3.31334 10.6636 5.11584 11.7953 7 11.7953C8.88417 11.7953 10.6867 10.6636 11.9467 8.68614C12.3842 8.00364 12.3842 6.81364 11.9467 6.13114C10.6867 4.15364 8.88417 3.02197 7 3.02197Z"
                  fill="#0E39B6" />
              </svg>
            </button>
            }

            @if (isTask) {
            <div class="test-card__checkbox-wrapper" [class.test-card__checkbox-wrapper--checked]="review"
              [class.test-card__checkbox-wrapper--disabled]="true">
              <input type="checkbox" class="test-card__checkbox" [checked]="review" [readonly]="true" [disabled]="true"
                tabindex="-1" (click)="logCheckboxState($event)" aria-hidden="true" />
            </div>
            }
          </div>
        </div>
        <div class="test-card__description">
          <p [ngClass]="{'text-truncate': allowShortTexts, 'text-truncate-2': !allowShortTexts}">
            @if(type=='test'){
            {{testDetails.brief}}
            }@else{
            {{testDetails.sub_title}}
            }
          </p>
        </div>
      </div>
      @if(!hideButtonAction){
      <div class="test-card__content-row">
        @if(type=='test'){
        <div class="test-card__information">
          <div class="test-card__information-participants">
            <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M5.34312 7.27817C5.32562 7.27817 5.31396 7.27817 5.29646 7.27817C5.26729 7.27234 5.22646 7.27234 5.19146 7.27817C3.49979 7.22567 2.22229 5.89567 2.22229 4.2565C2.22229 2.58817 3.58146 1.229 5.24979 1.229C6.91812 1.229 8.27729 2.58817 8.27729 4.2565C8.27146 5.89567 6.98812 7.22567 5.36062 7.27817C5.35479 7.27817 5.34896 7.27817 5.34312 7.27817ZM5.24979 2.104C4.06562 2.104 3.09729 3.07234 3.09729 4.2565C3.09729 5.42317 4.00729 6.36234 5.16812 6.40317C5.20312 6.39734 5.27896 6.39734 5.35479 6.40317C6.49812 6.35067 7.39646 5.4115 7.40229 4.2565C7.40229 3.07234 6.43396 2.104 5.24979 2.104Z"
                fill="#47586E" />
              <path
                d="M9.64813 7.35433C9.63063 7.35433 9.61313 7.35433 9.59563 7.3485C9.35647 7.37183 9.11147 7.20266 9.08813 6.9635C9.0648 6.72433 9.21063 6.5085 9.4498 6.47933C9.5198 6.4735 9.59563 6.4735 9.6598 6.4735C10.5115 6.42683 11.1765 5.72683 11.1765 4.86933C11.1765 3.98266 10.459 3.26516 9.5723 3.26516C9.33313 3.271 9.1348 3.07266 9.1348 2.8335C9.1348 2.59433 9.33313 2.396 9.5723 2.396C10.9373 2.396 12.0515 3.51016 12.0515 4.87516C12.0515 6.21683 11.0015 7.30183 9.66563 7.35433C9.6598 7.35433 9.65397 7.35433 9.64813 7.35433Z"
                fill="#47586E" />
              <path
                d="M5.34894 13.6543C4.20561 13.6543 3.05644 13.3627 2.18727 12.7793C1.37644 12.2427 0.933105 11.5077 0.933105 10.7085C0.933105 9.90933 1.37644 9.1685 2.18727 8.626C3.93727 7.46516 6.77227 7.46516 8.5106 8.626C9.31561 9.16266 9.76477 9.89766 9.76477 10.6968C9.76477 11.496 9.32144 12.2368 8.5106 12.7793C7.63561 13.3627 6.49227 13.6543 5.34894 13.6543ZM2.67144 9.361C2.11144 9.73433 1.80811 10.2127 1.80811 10.7143C1.80811 11.2102 2.11727 11.6885 2.67144 12.056C4.12394 13.0302 6.57394 13.0302 8.02644 12.056C8.58644 11.6827 8.88977 11.2043 8.88977 10.7027C8.88977 10.2068 8.58061 9.7285 8.02644 9.361C6.57394 8.39266 4.12394 8.39266 2.67144 9.361Z"
                fill="#47586E" />
              <path
                d="M10.6981 12.6042C10.4939 12.6042 10.3131 12.4642 10.2722 12.2542C10.2256 12.015 10.3772 11.7875 10.6106 11.735C10.9781 11.6592 11.3164 11.5133 11.5789 11.3092C11.9114 11.0583 12.0922 10.7433 12.0922 10.4108C12.0922 10.0783 11.9114 9.76334 11.5847 9.51834C11.3281 9.32001 11.0072 9.18001 10.6281 9.09251C10.3947 9.04001 10.2431 8.80668 10.2956 8.56751C10.3481 8.33418 10.5814 8.18251 10.8206 8.23501C11.3222 8.34584 11.7597 8.54418 12.1156 8.81834C12.6581 9.22668 12.9672 9.80418 12.9672 10.4108C12.9672 11.0175 12.6522 11.595 12.1097 12.0092C11.7481 12.2892 11.2931 12.4933 10.7914 12.5925C10.7564 12.6042 10.7272 12.6042 10.6981 12.6042Z"
                fill="#47586E" />
            </svg>
            <p>
              {{testDetails.usage_count}}
              {{'user'|translateApi}}
            </p>
          </div>
          <div class="test-card__information-period">
            <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M7.00004 13.7708C3.94337 13.7708 1.45837 11.2858 1.45837 8.22917C1.45837 5.1725 3.94337 2.6875 7.00004 2.6875C10.0567 2.6875 12.5417 5.1725 12.5417 8.22917C12.5417 11.2858 10.0567 13.7708 7.00004 13.7708ZM7.00004 3.5625C4.42754 3.5625 2.33337 5.65667 2.33337 8.22917C2.33337 10.8017 4.42754 12.8958 7.00004 12.8958C9.57254 12.8958 11.6667 10.8017 11.6667 8.22917C11.6667 5.65667 9.57254 3.5625 7.00004 3.5625Z"
                fill="#47586E" />
              <path
                d="M7 8.52067C6.76083 8.52067 6.5625 8.32234 6.5625 8.08317V5.1665C6.5625 4.92734 6.76083 4.729 7 4.729C7.23917 4.729 7.4375 4.92734 7.4375 5.1665V8.08317C7.4375 8.32234 7.23917 8.52067 7 8.52067Z"
                fill="#47586E" />
              <path
                d="M8.75 2.104H5.25C5.01083 2.104 4.8125 1.90567 4.8125 1.6665C4.8125 1.42734 5.01083 1.229 5.25 1.229H8.75C8.98917 1.229 9.1875 1.42734 9.1875 1.6665C9.1875 1.90567 8.98917 2.104 8.75 2.104Z"
                fill="#47586E" />
            </svg>
            <p>
              {{testDetails.duration}}
              {{'minutes'|translateApi}}
            </p>
          </div>
          <div class="test-card__information-questions">
            <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M4.66663 13.52C4.50329 13.52 4.33412 13.4792 4.18245 13.3975C3.84995 13.2225 3.64579 12.8725 3.64579 12.4991V11.6709C1.88413 11.49 0.729126 10.195 0.729126 8.33997V4.84001C0.729126 2.83334 2.07663 1.48584 4.08329 1.48584H9.91663C11.9233 1.48584 13.2708 2.83334 13.2708 4.84001V8.33997C13.2708 10.3466 11.9233 11.6941 9.91663 11.6941H7.71745L5.23244 13.3509C5.06328 13.4617 4.86496 13.52 4.66663 13.52ZM4.08329 2.355C2.57829 2.355 1.60413 3.32917 1.60413 4.83417V8.3342C1.60413 9.8392 2.57829 10.8134 4.08329 10.8134C4.32246 10.8134 4.52079 11.0117 4.52079 11.2509V12.4934C4.52079 12.5692 4.56746 12.6042 4.59663 12.6217C4.6258 12.6392 4.68413 12.6567 4.7483 12.6158L7.34414 10.8892C7.41414 10.8425 7.50163 10.8134 7.58913 10.8134H9.92246C11.4275 10.8134 12.4016 9.8392 12.4016 8.3342V4.83417C12.4016 3.32917 11.4275 2.355 9.92246 2.355H4.08329Z"
                fill="#47586E" />
              <path
                d="M6.99993 7.56396C6.76077 7.56396 6.56243 7.36563 6.56243 7.12646V7.00399C6.56243 6.32732 7.05826 5.99481 7.24492 5.86648C7.46076 5.72065 7.53075 5.62148 7.53075 5.46982C7.53075 5.17815 7.2916 4.93896 6.99993 4.93896C6.70827 4.93896 6.46912 5.17815 6.46912 5.46982C6.46912 5.70898 6.27078 5.90732 6.03162 5.90732C5.79245 5.90732 5.59412 5.70898 5.59412 5.46982C5.59412 4.69398 6.2241 4.06396 6.99993 4.06396C7.77577 4.06396 8.40575 4.69398 8.40575 5.46982C8.40575 6.13482 7.91577 6.46731 7.73494 6.58981C7.50744 6.74147 7.43743 6.84065 7.43743 7.00399V7.12646C7.43743 7.37146 7.2391 7.56396 6.99993 7.56396Z"
                fill="#47586E" />
              <path
                d="M7 9.0166C6.755 9.0166 6.5625 8.81827 6.5625 8.5791C6.5625 8.33993 6.76083 8.1416 7 8.1416C7.23917 8.1416 7.4375 8.33993 7.4375 8.5791C7.4375 8.81827 7.245 9.0166 7 9.0166Z"
                fill="#47586E" />
            </svg>

            <p>{{testDetails.question_number}} {{"questions"|translateApi}}</p>
          </div>
        </div>
        @if(!review){
        <button class="test-card__start-button" aria-label="startNow" (click)="openQuiz()">
          <svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M5.09081 12.4134C4.62998 12.4134 4.19248 12.3025 3.80748 12.0809C2.89748 11.5559 2.39581 10.4884 2.39581 9.08253V4.92337C2.39581 3.5117 2.89748 2.45003 3.80748 1.92503C4.71748 1.40003 5.88998 1.4992 7.11498 2.20503L10.7141 4.2817C11.9333 4.98753 12.61 5.95587 12.61 7.00587C12.61 8.05587 11.9391 9.0242 10.7141 9.73003L7.11498 11.8067C6.40915 12.2092 5.72081 12.4134 5.09081 12.4134ZM5.09081 2.4617C4.77581 2.4617 4.49581 2.5317 4.24498 2.67753C3.61498 3.0392 3.27081 3.83837 3.27081 4.92337V9.0767C3.27081 10.1617 3.61498 10.955 4.24498 11.3225C4.87498 11.69 5.73831 11.585 6.67748 11.0425L10.2766 8.96587C11.2158 8.42337 11.735 7.7292 11.735 7.00003C11.735 6.27087 11.2158 5.5767 10.2766 5.0342L6.67748 2.95753C6.10581 2.63087 5.56915 2.4617 5.09081 2.4617Z"
              fill="#0E39B6" />
          </svg>
          <span class="test-card__duration">
            {{'start_now'|translateApi}}
          </span>
        </button>
        }
        @else{
        <button class="test-card__start-button" aria-label="startNow" (click)="watchDetailsAction()">
          <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M7 9.93448C5.60583 9.93448 4.47417 8.80281 4.47417 7.40865C4.47417 6.01448 5.60583 4.88281 7 4.88281C8.39417 4.88281 9.52583 6.01448 9.52583 7.40865C9.52583 8.80281 8.39417 9.93448 7 9.93448ZM7 5.75781C6.09 5.75781 5.34917 6.49865 5.34917 7.40865C5.34917 8.31865 6.09 9.05948 7 9.05948C7.91 9.05948 8.65083 8.31865 8.65083 7.40865C8.65083 6.49865 7.91 5.75781 7 5.75781Z"
              fill="#0E39B6" />
            <path
              d="M7 12.6703C4.80667 12.6703 2.73584 11.387 1.3125 9.15864C0.694172 8.19614 0.694172 6.62697 1.3125 5.65864C2.74167 3.43031 4.8125 2.14697 7 2.14697C9.1875 2.14697 11.2583 3.43031 12.6817 5.65864C13.3 6.62114 13.3 8.19031 12.6817 9.15864C11.2583 11.387 9.1875 12.6703 7 12.6703ZM7 3.02197C5.11584 3.02197 3.31334 4.15364 2.05334 6.13114C1.61584 6.81364 1.61584 8.00364 2.05334 8.68614C3.31334 10.6636 5.11584 11.7953 7 11.7953C8.88417 11.7953 10.6867 10.6636 11.9467 8.68614C12.3842 8.00364 12.3842 6.81364 11.9467 6.13114C10.6867 4.15364 8.88417 3.02197 7 3.02197Z"
              fill="#0E39B6" />
          </svg>
          <span class="test-card__duration">
            @if(review){
            {{"mental_health_scale_exam_result" | translateApi}}
            }@else{
            {{'start_now'|translateApi}}
            }</span>
        </button>
        }
        }
      </div>
      }
    </div>
  </div>

</div>