<article class="global-therapeutic-program-card" [ngClass]="{
    'global-therapeutic-program-card--details': type === cardType.DETAILS
  }" (click)="openProgramSubscription()" role="link"
  [attr.aria-label]="'View details for ' + (item.title ?? 'this program')">
  <div class="global-therapeutic-program-card__content" [ngClass]="{
      'global-therapeutic-program-card__content--details': type === cardType.DETAILS
    }">
    <div class="global-therapeutic-program-card__image" [ngClass]="{
        'global-therapeutic-program-card__image--details': type === cardType.DETAILS
      }">
      <img [src]="item.image || 'images/trash/program.png'"
        [alt]="item.title ? item.title + ' program image' : 'Therapeutic program image'" loading="lazy" decoding="async"
        fetchpriority="low" width="100" height="100" (error)="item.image = 'images/trash/program.png'"
        aria-hidden="false" />
    </div>

    <div class="global-therapeutic-program-card__info">
      <h3 class="global-therapeutic-program-card__title">
        <span [ngClass]="{
            'global-therapeutic-program-card__title--details': type === cardType.DETAILS
          }">
          {{ item.title ?? '' }}
        </span>

        <div class="global-therapeutic-program-card__price" role="status" aria-live="polite">
          @if (!item.is_purchased) {
          <div class="cost">
            <p>{{ item.price ?? '' }}</p>
            <app-svg-icon name="saudia-price-icon" [fillColor]="'#0E39B6'" />
          </div>
          } @else {
          <div class="subscriber">
            <p>{{ translate('subscribed') }}</p>
          </div>
          }
        </div>
      </h3>

      <p class="global-therapeutic-program-card__description text-truncate-2">
        {{ item.description ?? '' }}
      </p>
    </div>
  </div>

  <div class="global-therapeutic-program-card__details" [ngClass]="{
      'global-therapeutic-program-card__details--details': type === cardType.DETAILS
    }">
    <div class="global-therapeutic-program-card__details__sessions">
      <app-svg-icon name="sessions-count" [fillColor]="'#47586E'" />
      <span>{{ item.sessions_count ?? '' }}</span>
      <span class="sr-only">{{ translate('sessions') }}</span>
      <span>{{ translate('sessions') }}</span>
    </div>

    @if (item.seats_label) {
    <div class="global-therapeutic-program-card__details__seats">
      <app-svg-icon name="seats-label" [fillColor]="'#47586E'" />
      <span>{{ item.seats_label ?? '' }}</span>
      <span class="sr-only">{{ translate('reminder_seatsRemaining') }}</span>
    </div>
    }

    <div class="global-therapeutic-program-card__details__usage">
      <app-svg-icon name="usage-number" [fillColor]="'#47586E'" />
      <span>{{ item.usage_number ?? '' }}</span>
      <span class="sr-only">{{ translate('therapeuticPrograms.peopleRegistered') }}</span>
      <span>{{ translate('registered') }}</span>
    </div>
  </div>
</article>