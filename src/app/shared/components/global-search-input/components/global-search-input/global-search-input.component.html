<div class="search-box" role="search" aria-haspopup="listbox" [attr.aria-expanded]="showSuggestions()"
  aria-owns="search-list">
  <span class="search-box__icon" (click)="config.emitWhenClick ? onSearchClick() : null">
    <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
      viewBox="0 0 18 18" fill="none">
      <path
        d="M8.625 16.3125C4.3875 16.3125 0.9375 12.8625 0.9375 8.625C0.9375 4.3875 4.3875 0.9375 8.625 0.9375C12.8625 0.9375 16.3125 4.3875 16.3125 8.625C16.3125 12.8625 12.8625 16.3125 8.625 16.3125ZM8.625 2.0625C5.0025 2.0625 2.0625 5.01 2.0625 8.625C2.0625 12.24 5.0025 15.1875 8.625 15.1875C12.2475 15.1875 15.1875 12.24 15.1875 8.625C15.1875 5.01 12.2475 2.0625 8.625 2.0625Z"
        fill="#47586E" />
      <path
        d="M16.5 17.0626C16.3575 17.0626 16.215 17.0101 16.1025 16.8976L14.6025 15.3976C14.385 15.1801 14.385 14.8201 14.6025 14.6026C14.82 14.3851 15.18 14.3851 15.3975 14.6026L16.8975 16.1026C17.115 16.3201 17.115 16.6801 16.8975 16.8976C16.785 17.0101 16.6425 17.0626 16.5 17.0626Z"
        fill="#47586E" />
    </svg>
  </span>

  <input type="text" [value]="inputValue()" (input)="onInput($event)" [placeholder]="translate(config.placeholder)"
    [attr.aria-label]="translate(config.placeholder)" [disabled]="config.disabled" [autofocus]="config.autoFocus"
    autocomplete="off" role="searchbox" aria-autocomplete="list" aria-controls="search-list"
    [attr.aria-activedescendant]="
      highlightedIndex() >= 0 ? 'suggestion-' + highlightedIndex() : null
    " [attr.autofocus]="config.autoFocus ? '' : null" />

  <button *ngIf="inputValue() && !showLoadingIndicator" type="button" class="search-box__clear"
    aria-label="Clear search" (click)="clear()">
    âœ•
  </button>

  <div *ngIf="showLoadingIndicator" class="search-box__loading-spinner">
    <svg class="spinner" width="18px" height="18px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
      <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
    </svg>
  </div>

  <ul *ngIf="showSuggestions()" class="search-box__suggestions" id="search-list" role="listbox">
    <li *ngFor="let suggestion of filteredSuggestions(); let i = index" (click)="writeSuggestion(suggestion)"
      [class.highlighted]="i === highlightedIndex()" id="suggestion-{{ i }}" role="option"
      [attr.aria-selected]="i === highlightedIndex()" tabindex="-1">
      {{ suggestion }}
    </li>
  </ul>
</div>